"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[6580],{76580:(k,g,a)=>{a.r(g),a.d(g,{DfGlobalLookupKeysComponent:()=>K});var f,y=a(97582),c=a(56223),r=a(84870),E=a(42281),D=a(42346),_=a(32296),h=a(86806),p=a(78791),t=a(65879),m=a(81896);a(6625);let K=((f=class{constructor(u,l,C){this.crudService=u,this.fb=l,this.activatedRoute=C,this.lookupKeysForm=this.fb.group({lookupKeys:this.fb.array([],[E.E])})}ngOnInit(){this.activatedRoute.data.subscribe(({data:u})=>{u.resource.length>0&&u.resource.forEach(l=>{this.lookupKeysForm.controls.lookupKeys.push(new c.cw({name:new c.NI(l.name,[c.kI.required]),value:new c.NI(l.value),private:new c.NI(l.private),id:new c.NI(l.id)}))})})}save(){if(this.lookupKeysForm.invalid||this.lookupKeysForm.pristine)return;const u=[],l=[];this.lookupKeysForm.get("lookupKeys").controls.forEach(d=>{d.pristine||(d.value.id?l.push(d.value):u.push({...d.value,id:null}))}),u.length>0&&this.crudService.create({resource:u},{fields:"*",snackbarSuccess:"lookupKeys.alerts.createSuccess"}).subscribe(),l.length>0&&l.forEach(d=>{d.id&&this.crudService.update(d.id,d,{snackbarSuccess:"lookupKeys.alerts.updateSuccess"}).subscribe()})}}).\u0275fac=function(u){return new(u||f)(t.Y36(h.sC),t.Y36(c.qu),t.Y36(m.gz))},f.\u0275cmp=t.Xpm({type:f,selectors:[["df-global-lookup-keys"]],standalone:!0,features:[t.jDz],decls:8,vars:8,consts:[[3,"formGroup","ngSubmit"],["formArrayName","lookupKeys",3,"showAccordion"],["mat-flat-button","","type","submit",1,"save-btn"]],template:function(u,l){1&u&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"transloco"),t.qZA(),t.TgZ(3,"form",0),t.NdJ("ngSubmit",function(){return l.save()}),t._UZ(4,"df-lookup-keys",1),t.TgZ(5,"button",2),t._uU(6),t.ALo(7,"transloco"),t.qZA()()),2&u&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"lookupKeys.fullDesc")),t.xp6(2),t.Q6J("formGroup",l.lookupKeysForm),t.xp6(1),t.Q6J("showAccordion",!1),t.xp6(2),t.hij(" ",t.lcZ(7,6,"save")," "))},dependencies:[r.a,c.UX,c._Y,c.JL,c.sg,c.CE,D.Ot,_.ot,_.lW]}),f);K=(0,y.gn)([(0,p.c)({checkProperties:!0})],K)},84870:(k,g,a)=>{a.d(g,{a:()=>A});var l,y=a(97582),c=a(96814),r=a(56223),E=a(64170),D=a(32296),_=a(25313),h=a(2032),p=a(82599),t=a(45597),m=a(3305),i=a(90590),f=a(42346),K=a(78791),o=a(65879),u=a(65763);function C(e,n){if(1&e&&(o.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),o._uU(4),o.ALo(5,"transloco"),o.qZA(),o.TgZ(6,"mat-panel-description"),o._uU(7),o.ALo(8,"transloco"),o.qZA()(),o.GkF(9,3),o.qZA()()),2&e){o.oxw();const s=o.MAs(4);o.xp6(4),o.hij(" ",o.lcZ(5,3,"lookupKeys.label"),""),o.xp6(3),o.Oqu(o.lcZ(8,5,"lookupKeys.desc")),o.xp6(2),o.Q6J("ngTemplateOutlet",s)}}function d(e,n){1&e&&(o.TgZ(0,"mat-header-cell"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"name")," "))}function T(e,n){1&e&&(o.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),o._uU(3),o.ALo(4,"transloco"),o.qZA(),o._UZ(5,"input",18),o.qZA()()),2&e&&(o.Q6J("formGroupName",n.index),o.xp6(3),o.Oqu(o.lcZ(4,2,"name")))}function L(e,n){1&e&&(o.TgZ(0,"mat-header-cell"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"value")," "))}function M(e,n){1&e&&(o.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),o._uU(3),o.ALo(4,"transloco"),o.qZA(),o._UZ(5,"input",19),o.qZA()()),2&e&&(o.Q6J("formGroupName",n.index),o.xp6(3),o.Oqu(o.lcZ(4,2,"value")))}function P(e,n){1&e&&(o.TgZ(0,"mat-header-cell"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"private")," "))}function x(e,n){1&e&&(o.TgZ(0,"mat-cell",16),o._UZ(1,"mat-slide-toggle",20),o.ALo(2,"transloco"),o.qZA()),2&e&&(o.Q6J("formGroupName",n.index),o.xp6(1),o.uIk("aria-label",o.lcZ(2,2,"name")))}function Z(e,n){if(1&e){const s=o.EpF();o.TgZ(0,"mat-header-cell")(1,"button",21),o.NdJ("click",function(){o.CHM(s);const O=o.oxw(2);return o.KtG(O.add())}),o.ALo(2,"transloco"),o._UZ(3,"fa-icon",22),o.qZA()()}if(2&e){const s=o.oxw(2);o.xp6(1),o.uIk("aria-label",o.lcZ(2,2,"newEntry")),o.xp6(2),o.Q6J("icon",s.faPlus)}}function U(e,n){if(1&e){const s=o.EpF();o.TgZ(0,"mat-cell",16)(1,"button",23),o.NdJ("click",function(){const b=o.CHM(s).index,W=o.oxw(2);return o.KtG(W.remove(b))}),o._UZ(2,"fa-icon",24),o.qZA()()}if(2&e){const s=n.index,v=o.oxw(2);o.Q6J("formGroupName",s),o.xp6(2),o.Q6J("icon",v.faTrashCan)}}function I(e,n){1&e&&o._UZ(0,"mat-header-row")}function N(e,n){1&e&&o._UZ(0,"mat-row")}function R(e,n){1&e&&(o.TgZ(0,"tr",25)(1,"td",26),o._uU(2),o.ALo(3,"transloco"),o.qZA()()),2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"lookupKeys.noKeys")," "))}function B(e,n){if(1&e&&(o.ynx(0,4)(1,5),o.TgZ(2,"mat-table",6),o.ynx(3,7),o.YNc(4,d,3,3,"mat-header-cell",8),o.YNc(5,T,6,4,"mat-cell",9),o.BQk(),o.ynx(6,10),o.YNc(7,L,3,3,"mat-header-cell",8),o.YNc(8,M,6,4,"mat-cell",9),o.BQk(),o.ynx(9,11),o.YNc(10,P,3,3,"mat-header-cell",8),o.YNc(11,x,3,4,"mat-cell",9),o.BQk(),o.ynx(12,12),o.YNc(13,Z,4,4,"mat-header-cell",8),o.YNc(14,U,3,2,"mat-cell",9),o.BQk(),o.YNc(15,I,1,0,"mat-header-row",13),o.YNc(16,N,1,0,"mat-row",14),o.YNc(17,R,4,3,"tr",15),o.qZA(),o.BQk()()),2&e){const s=o.oxw();o.Q6J("formGroup",s.rootForm),o.xp6(2),o.Q6J("dataSource",s.dataSource),o.xp6(13),o.Q6J("matHeaderRowDef",s.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",s.displayedColumns)}}let A=((l=class{constructor(n,s){this.rootFormGroup=n,this.themeService=s,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=i.Vui,this.faPlus=i.r8p,this.showAccordion=!0,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(n=>{n.get("id")?.value&&n.get("name")?.disable()}),this.dataSource=new _.by(this.lookupKeys.controls)}add(){this.lookupKeys.push(new r.cw({name:new r.NI("",r.kI.required),value:new r.NI(""),private:new r.NI(!1)})),this.updateDataSource()}remove(n){this.lookupKeys.removeAt(n),this.updateDataSource()}}).\u0275fac=function(n){return new(n||l)(o.Y36(r.sg),o.Y36(u.F))},l.\u0275cmp=o.Xpm({type:l,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},standalone:!0,features:[o.jDz],decls:5,vars:6,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["color","primary","formControlName","private"],["mat-mini-fab","","type","button",1,"save-btn",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",1,"remove-btn",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(n,s){if(1&n&&(o.TgZ(0,"div",0),o.ALo(1,"async"),o.YNc(2,C,10,7,"mat-accordion",1),o.YNc(3,B,18,4,"ng-template",null,2,o.W1O),o.qZA()),2&n){const v=o.MAs(4);o.Tol(o.lcZ(1,4,s.isDarkMode)?"dark-theme":""),o.xp6(2),o.Q6J("ngIf",s.showAccordion)("ngIfElse",v)}},dependencies:[r.u5,r.Fj,r.JJ,r.JL,r.UX,r.sg,r.u,r.x0,r.CE,c.O5,c.tP,E.lN,E.KE,E.hX,D.ot,D.RK,D.nh,_.p0,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,_.Ee,h.c,h.Nt,p.rP,p.Rr,t.uH,t.BN,m.To,m.pp,m.ib,m.yz,m.yK,m.u4,f.Ot,c.Ov],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]}),l);A=(0,y.gn)([(0,K.c)({checkProperties:!0})],A)},42281:(k,g,a)=>{a.d(g,{E:()=>c});var y=a(56223);const c=r=>{const E=new Map,D=r;function _(p){D.at(p).get("name")?.setErrors({notUnique:!0})}return D.controls.forEach((p,t)=>{if(!(p instanceof y.cw))return;const m=p.get("name");if(!m)return;const i=m.value;i&&(E.has(i)?(_(E.get(i)??0),_(t)):(E.set(i,t),function h(p){const m=D.at(p).get("name"),i=m?.errors;i&&(delete i.notUnique,m.setErrors(Object.keys(i).length?i:null))}(t)))}),null}}}]);